<!DOCTYPE html>
<html lang="fr" translate="no">
<head translate="no">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interventions</title>
   

    <link id="themeLink" rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="logo-app.png">
</head>
<body>
<div class="tab">
    <div id="cameraButton" class="tab-button_u" onclick="openTab('camera')">üì∑</div>
    <div class="tab_under">
        <div id="creerButton" class="tab-button" onclick="openTab('creer')">Ajouter</div>
        <div id="ChronoButton" class="tab-button" onclick="openTab('Chrono')" annim="false">Chronos</div>
        <div id="interventionsButton" class="tab-button" onclick="openTab('interventions')">Inters.</div>
    </div>
</div>


<div id="appTab" class="tabcontent">
    <div class="container">
        <div class="CamVisu">
            <img src="Photo.jpg" alt="Camera QR" class="center-image">
        </div>
    </div>
</div>


<div id="impTab" class="tabcontent">
    <div class="container">
        <div class="CamVisu">
            <img src="imp.png" alt="Camera QR" class="center-image">
        </div>
    </div>
</div>


<div id="EXPTab" class="tabcontent">
      <div class="container">

  <iframe src="Gest.html" style="height: 100% !important; width: 100%;"></iframe>
          </div>

</div>


<div id="cameraTab" class="tabcontent">
    <div class="container">
        <div class="CamVisu">
            <h1>Camera QR</h1>
            <img src="Camera.png" alt="Camera QR" class="center-image">
        </div>
    </div>
</div>


<div id="creerTab" class="tabcontent">
    <!-- Contenu de l'onglet "Cr√©er" -->
    <div class="container">
        <h1>Choix du Lieu, Machine</h1>
<div id="rech">
    <input type="text" id="searchInput" placeholder="Rechercher un lieu..." oninput="searchLieu()">
    <button id="clearButton" style="display: none;" onclick="clearSearchInput()">‚úñ</button>
</div>


        <ul id="lieux-list" onclick="" class="lieux-list"></ul>
    </div>
</div>

<div id="ChronoTab" class="tabcontent">

    <!-- Contenu de l'onglet "Chrono" -->
    <div class="container">
        <div id="chronosContainer"></div>
    </div>


<div id="modifierLieuModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="fermerModalModifierLieu()">&times;</span>
        <h2>Choisir un nouveau lieu</h2>
        
        <!-- Zone de recherche -->
        <div id="rech">
            <input type="text" id="searchInput2" placeholder="Rechercher un lieu..." oninput="searchLieu2()">
            <button id="clearButton2" style="display: none;" onclick="clearSearchInput2()">‚úñ</button>
        </div>
        
        <!-- Liste des lieux -->
        <ul id="arborescenceLieux"></ul>
    </div>
</div>


</div>





<style>
        /* Styles pour le fond gris semi-transparent */
        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Fond gris semi-transparent */
            z-index: 1;
        }
#TUTORIEL {
    height: 70vw ; /* Calcul de la hauteur en fonction du ratio 16:9 */
    max-width: 100%; /* Pour √©viter que la largeur ne d√©passe la largeur du contenu parent */
    max-height: 370px; /* Pour √©viter que la hauteur ne d√©passe la hauteur du contenu parent */
}
    #themeButtons {
        text-align: center;  /* Aligner les boutons au centre de la div */
    }

    #themeButtons button {
        display: inline-block;  /* Afficher les boutons en ligne */
        margin-right: 10px;  /* Espacement entre les boutons */
    }
            </style>

            <div id="overlay"></div>

<!-- Structure de la modal -->
<div id="tutorialModal" class="modal" style="display: none;">
    <div class="modal-content">
           <h2>Comment fonctionne le site web</h2>
        <div id="carousel">
            <div class="iframe-container" id="iframeContainer"></div>

        </div>

<hr>
        <!-- Notification sur l'utilisation des cookies -->
        <div class="cookie-notification">
            <p>Ce site utilise des cookies pour stock√© les crhono, ils ne sont donc accesible que sur un appareil √† la fois, cependant, apr√®s l'exportations, ils seront stock√© en dehors du t√©l√©phone et acc√©sible sur nimporte quel appareil</p>


        </div>

        <!-- Bouton d'acc√®s au site web -->
        <button id="accessButton" class="button" onclick="openWebsite()">Acc√©der au site web</button>
    </div>

</div>




<div id="interventionsTab" class="tabcontent">
    <!-- Contenu de l'onglet "Interventions" -->
    <div class="container">
        <div class="buttons-container">
           <h1>Interventions</h1>
            <div class="button-wrapper">
                <button onclick="exportServ()"style="background-color: green;">Envoyer les intervention au server</button>
            </div>

        </div>

        <div id="enregistrements">
            <div class="groupe-enregistrements" id="groupe-_6ek3q5piu"><h3>Tutoriel</h3><div class="AFregis">24/09/2024 - r√©sum√© de l'intervention<div style="display: flex; align-items: center;"><button class="button-supprimer" style="margin-right: 10px;">üóëÔ∏è</button><span>01m 50s - Technicien ayant particip√©</span></div><div style="display: flex;"><button class="button-tech" style="margin-right: 5px;">+ Tech.</button><button class="button-restaurer" style="margin-right: 5px;">Restaurer</button></div></div></div>

</div>

    </div>
</div>


</div>
</div>

  <style>

 .window {
    position: absolute;
    border: 3px solid black;
    border-radius: 13px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    background-color: #fff;
    width: 93%;
    z-index: 1000;
    user-select: none;
    bottom: 1%;
    left: 50%;
    transform: translate(-50%, 0);
  }

  .title-bar {
    background-color: red;
    color: white;
    padding: 4px;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    font-size: 15px;  }

  .content {
    padding: 5px;
    font-size: 15px;
  }

  .button-container {
    display: flex;
    justify-content: space-between;
    margin-top: 5px;
  }

  .btn {
    padding: 4px 6px;
    background-color: red;
    color: white;
    border: none;
    border-radius: 4px;
  }

  .btn:hover {
    background-color: darkred;
  }

    .btn:disabled {
    background-color: grey;
  }
  </style>


<div class="window" id="window1">
  <div class="title-bar">Tutoriel</div>
  <div class="content" id="tutorialContent">Bienvenu sur "intervention"</div>
  <div class="button-container">
        <button class="btn" id="prevBtn" disabled>Pr√©c√©dent</button>

    <button class="btn" id="nextBtn">Suivant</button>
  </div>
</div>



<script>

window.onload = function() {
}


    function autreFonction() {


    }

    // Tableau des √©tapes du tutoriel avec contenu et actions associ√©es
 const tutorialSteps = [
  {
    content: 'Bienvenue sur "intervention".<br><br>Les √©l√©ments √† prendre en compte seront surlign√©s en orange ou rouge.<br><br>Cliquez sur Suivant pour commencer.',
    action: null // Pas d'action pour la premi√®re √©tape
  },
{
  content: "La page contient des onglets en haut permettant de se promener sur le site web",
  action: () => {
    // R√©cup√©rer le premier √©l√©ment avec la classe 'tab'
    const aff = document.getElementsByClassName('tab')[0]; // Acc√©der au premier √©l√©ment 'tab'

    // R√©cup√©rer les √©l√©ments par leur ID
    const str1 = document.getElementById('creerButton');
    const str2 = document.getElementById('ChronoButton');
    const str3 = document.getElementById('interventionsButton');

    // Appliquer les styles si l'√©l√©ment existe
    if (aff) {
      aff.style.backgroundColor = 'Red'; // Appliquer la couleur rouge au premier 'tab'
    }

    if (str1) {
      str1.style.backgroundColor = 'rgba(200,200,200,0.3)'; // Appliquer une couleur √† 'creerButton'
    }

    if (str2) {
      str2.style.backgroundColor = 'rgba(200,200,200,0.3)'; // Appliquer une couleur √† 'ChronoButton'
    }

    if (str3) {
      str3.style.backgroundColor = 'rgba(200,200,200,0.3)'; // Appliquer une couleur √† 'interventionsButton'
    }
  }
},
{
  content: "√âtape 1 : Choix d'une machine ou d'un lieu.",
  action: () => {

    // R√©initialiser les styles appliqu√©s pr√©c√©demment
    const aff = document.getElementsByClassName('tab')[0]; // Acc√©der au premier √©l√©ment 'tab'

    // R√©cup√©rer les √©l√©ments par leur ID
    const str1 = document.getElementById('creerButton');
    const str2 = document.getElementById('ChronoButton');
    const str3 = document.getElementById('interventionsButton');

    // R√©initialiser les styles si l'√©l√©ment existe
    if (aff) {
      aff.style.backgroundColor = ''; // R√©initialiser la couleur de fond du 'tab' √† son √©tat par d√©faut
    }

    if (str1) {
      str1.style.backgroundColor = ''; // R√©initialiser √† l'√©tat par d√©faut d√©fini par le CSS
    }

    if (str2) {
      str2.style.backgroundColor = ''; // R√©initialiser √† l'√©tat par d√©faut
    }

    if (str3) {
      str3.style.backgroundColor = ''; // R√©initialiser √† l'√©tat par d√©faut
    }
        openTab('creer'); // Ouvrir l'onglet 'creer'
  }
},


  {
    content: "Cliquez sur un lieu pour le d√©rouler et ainsi d√©couvrir les machines ou d'autres lieux.",
    action: () => {
      // R√©cup√©rer le premier √©l√©ment avec la classe 'place-card level-0'
      const aff = document.getElementsByClassName('place-card level-0')[1];
      if (aff) {
        aff.style.backgroundColor = 'orange'; // Changer la couleur de fond en orange
      }
    }
  },
  {
    content: "Il est possible de chercher un lieu pr√©cis en cas de besoin",
    action: () => {
      // R√©initialiser la couleur de fond de l'√©l√©ment pr√©c√©dent
      const aff = document.getElementsByClassName('place-card level-0')[1];
      if (aff) {
        aff.style.backgroundColor = ''; // R√©initialiser la couleur de fond
      }

      // R√©cup√©rer l'input avec l'id 'searchInput'
      const str = document.getElementById('searchInput');
      if (str) {
        str.style.backgroundColor = 'orange'; // Changer la couleur de fond en orange
      }
    }
  },
  {
    content: "Une fois le lieu trouv√©, cr√©ez une intervention en cliquant sur l'ic√¥ne d'un chrono √† la droite du lieu.",
    action: () => {
      // R√©initialiser la couleur de fond de l'√©l√©ment pr√©c√©dent
      const aff = document.getElementById('searchInput');   
      if (aff) {
        aff.style.backgroundColor = ''; // R√©initialiser la couleur de fond
      }

      // R√©cup√©rer l'√©l√©ment avec l'id 'lancer-chrono-btn-Tutoriel'
      const str = document.getElementById('lancer-chrono-btn-Tutoriel');
      if (str) {
        str.style.backgroundColor = 'orange'; // Exemple : changer la couleur de fond en orange
      }
    }
  },
  {
  content: "Il est √©galement possible de cr√©e inter via QR code",
  action:  () => {
       const aff = document.getElementById('cameraButton');   
      if (aff) {
        aff.style.backgroundColor = 'orange'; // R√©initialiser la couleur de fond
      }
}
},
{
  content: "Scanner le QRcode via la camera : <br>L'intervention ce lancera automatiquement",
  action: () => {
       const aff = document.getElementById('cameraButton');   
      if (aff) {
        aff.style.backgroundColor = ''; // R√©initialiser la couleur de fond
      }
    
        openTab('camera'); // Ouvrir l'onglet 'creer'
  }
},
  {
  content: "Il est possible de scanner ce m√™me QRcode depuis l'aplication 'Appareil Photo' du t√©l√©phone, celui si renvera vers le site",
  action: () => {

    
        openTab('app'); // Ouvrir l'onglet 'creer'
  }
},
  {
    content: "√âtape 2 : Gestion de l'intervention",
    action: () => { 
ajouterTitreEtIframe('Tutoriel');
ajouterTitreEtIframe('Lieu dit');
ajouterTitreEtIframe('Secteur 2');
OVC()}
  },
    {
    content: "Un chonom√®tre est automatiquement lanc√©. <br><br> Vous trouverez 3 boutons en bas pour la gestion de l'intervention : <br>Annuler&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pause&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enregistrer",
    action: null
  },
  {
    content: "Vous trouverez tous les √©l√©ments pour cr√©er convenablement une intervention, comme les √©l√©ments type, cause, r√©sumer... <br><br> Vous pouvez soit cliquez dessus pour avoir la liste d√©roulante, soit directement chercher avec le clavier",
    action: null
  },
{
  content: "Le temps peut √©galement √™tre modifi√© avec le bouton suivant sur la page : <br><div id='buttonContainer'></div><br> Attention le temps doit √™tre sous cette forme<br> 5j 23h 12m<br><br>on peut √©crire dans n'importe quel sens en omettant certain √©lement mais on doit toujours avoir 'j', 'm', 's' pour signaler le temps voulu, par exemple <br> 3h 1j fonctionnera ",
  action: () => {
    const buttonContainer = document.getElementById('buttonContainer');
    
    // Cr√©er un bouton dynamiquement
    const button = document.createElement('button');
    button.innerHTML = 'üïî';
    button.classList.add('modal-button');

    // Appliquer des styles au bouton
    button.style.backgroundColor = '#3498db';
    button.style.color = '#fff';
    button.style.border = 'none';
    button.style.padding = '8px';
    button.style.borderRadius = '8px';
    button.style.cursor = 'pointer';
    button.style.marginRight = '5px';
    button.style.height = '40px';
    button.style.width = '40px';
    
    // Ajouter le bouton dans le conteneur apr√®s les <br>
    buttonContainer.appendChild(button);
  }
},

  {
    content: "Modification du lieu, le bouton 'modifier' permets la modification du lieu en cas d'erreur",
    action: () =>{
      // R√©initialiser la couleur de fond de l'√©l√©ment pr√©c√©dent
const aff = document.querySelector('.titre-lieu button');
      if (aff) {
        aff.style.backgroundColor = 'red'; // R√©initialiser la couleur de fond
      }} // Il manque probablement une action ici, je l'ai laiss√©e vide pour l'instant
  },
  {
    content: "Apr√®s que tout les √©l√©ments soit bien remplis il est possible de l'enregistrer",
    action: () => {
const aff = document.querySelector('.titre-lieu button');
      if (aff) {
        aff.style.backgroundColor = ''; // R√©initialiser la couleur de fond
      }} // Il manque probablement une action ici, je l'ai laiss√©e vide pour l'instant
    
  },
  {
    content: 'Ici sont stock√© temporairement sur le t√©l√©phone les interventions',
    action:  () => {openTab('interventions')}
  },
   {
    content: "Il est possible d'ajouter un thechnicien sur l'intervention, de r√©stor√© sur le pr√©c√©dent √©cran l'intervention voir de la supprimer avec le thechnicien",
    action:  null
  },
{
  content: "√† pr√©sent que toutes les interventions sont sauvegard√©es sur le t√©l√©phone (√† la fin de journ√©e par exemple) <br>Il n'y a plus qu'√† envoyer les inters sur le serveur",
  action: () => {
    // R√©cup√©rer le premier √©l√©ment avec la classe 'buttons-container'
    const dfg = document.getElementsByClassName('buttons-container');
    if (dfg.length > 0) {  // V√©rifie s'il y a au moins un √©l√©ment
      dfg[0].style.backgroundColor = 'orange'; // Appliquer la couleur de fond √† l'√©l√©ment
    } 
  }
},
{
  content: "Voila pour la partie intervention",
  action: () => {
    // R√©cup√©rer le premier √©l√©ment avec la classe 'buttons-container'
    const dfg = document.getElementsByClassName('buttons-container');
    if (dfg.length > 0) {  // V√©rifie s'il y a au moins un √©l√©ment
      dfg[0].style.backgroundColor = ''; // Appliquer la couleur de fond √† l'√©l√©ment
    } 
      const dfgdgf = document.getElementsByClassName('groupe-enregistrements');
    if (dfgdgf.length > 0) {  // V√©rifie s'il y a au moins un √©l√©ment
      dfgdgf[0].style.display = 'none'; // Appliquer la couleur de fond √† l'√©l√©ment
    } 
  }
},
{
  content: "Maintenant connect√© vous sur la session gestion",
  action: () => {         // Ouvrir l'onglet 'creer'
const dfg = document.getElementsByClassName('tab');
for (let i = 0; i < dfg.length; i++) {
    dfg[i].style.display = 'none';  // Applique le style 'display: none' √† chaque √©l√©ment
}

// Ensuite, vous pouvez appeler la fonction openTab avec le nom de l'onglet souhait√©
openTab('dsr');

  }
},
{
  content: "Maintenant connect√© vous avez 2 obtion principal <br><br>Exportation = qui exporte les CSV pour ManageMaint 4<br><br>Acc√©der aux archives permettant d'acceder au archives ",
  action: () => { 
// Ensuite, vous pouvez appeler la fonction openTab avec le nom de l'onglet souhait√©
openTab('EXP');

  }
},
{
  content: "Sur cette m√™me page plus bas ce trouvent des obtion pour cr√©e des utilisateur ainsi que modifier leurs mots de passes"
},
{
  content: "il ne reste plus qu'√† importer le csv dans la gmao",
  action: () => { 
// Ensuite, vous pouvez appeler la fonction openTab avec le nom de l'onglet souhait√©
openTab('imp');

  }
},
{
    content: 'rendez vous page 284 pour plus d\'information sur la GMAO : <a href="https://as-informatique.com/pdf/notice_managemaint.pdf" target="_blank">https://as-informatique.com/pdf/notice_managemaint.pdf</a>',
  action: () => {}
},
{
  content: "Fin de la visite",
  action: () => { 
// Ensuite, vous pouvez appeler la fonction openTab avec le nom de l'onglet souhait√©
openTab('sdfsdf');

  }
},

];


    let currentStep = 0;

    // Mettre √† jour le contenu du tutoriel et ex√©cuter l'action associ√©e
    function updateContent() {
      const contentElement = document.getElementById('tutorialContent');
      contentElement.innerHTML = tutorialSteps[currentStep].content;

      // Ex√©cuter l'action associ√©e si elle existe
      if (tutorialSteps[currentStep].action) {
        tutorialSteps[currentStep].action();
      }

      // G√©rer l'√©tat des boutons
      document.getElementById('prevBtn').disabled = currentStep === 0;
      document.getElementById('nextBtn').disabled = currentStep === tutorialSteps.length - 1;
    }

    // √âcouteurs pour les boutons "Pr√©c√©dent" et "Suivant"
    document.getElementById('prevBtn').addEventListener('click', () => {
      if (currentStep > 0) {
        currentStep--;
        updateContent();
      }
    });

    document.getElementById('nextBtn').addEventListener('click', () => {
      if (currentStep < tutorialSteps.length - 1) {
        currentStep++;
        updateContent();
      }
    });

    // Initialisation du contenu au chargement de la page
    updateContent();


function OVC() {



    openTab('Chrono')

}

</script>


</body>
<script src="Lieu.js"></script>
<script src="GestionIframe.js"></script>


</html>

